import{x as u,y as g,r as v}from"./index-BCVEqFNE.js";const o={async getEvents(){return(await u.get("/events")).data.events},async createEvent(n){return(await u.post("/events",n)).data.event},async deleteEvent(n){await u.delete(`/events/${n}`)},async joinEvent(n){return(await u.post(`/events/${n}/join`)).data.event},async leaveEvent(n){return(await u.post(`/events/${n}/leave`)).data.event}},h=g("events",()=>{const n=v([]),r=v(!1),a=v(null),s=v(null);async function i(){r.value=!0,a.value=null;try{return n.value=await o.getEvents(),!0}catch(t){return a.value=t instanceof Error?t.message:"Erro ao carregar eventos",!1}finally{r.value=!1}}async function f(t){r.value=!0,a.value=null;try{const e=await o.createEvent(t);return n.value.unshift(e),!0}catch(e){return a.value=e instanceof Error?e.message:"Erro ao criar evento",!1}finally{r.value=!1}}async function E(t){r.value=!0,a.value=null;try{return await o.deleteEvent(t),n.value=n.value.filter(e=>e.id!==t),!0}catch(e){return a.value=e instanceof Error?e.message:"Erro ao deletar evento",!1}finally{r.value=!1}}async function d(t){a.value=null,s.value=t;try{const e=await o.joinEvent(t),l=n.value.findIndex(c=>c.id===t);return l!==-1&&(n.value[l]=e),!0}catch(e){return a.value=e instanceof Error?e.message:"Erro ao entrar no evento",!1}finally{s.value=null}}async function y(t){a.value=null,s.value=t;try{const e=await o.leaveEvent(t),l=n.value.findIndex(c=>c.id===t);return l!==-1&&(n.value[l]=e),!0}catch(e){return a.value=e instanceof Error?e.message:"Erro ao sair do evento",!1}finally{s.value=null}}function p(){a.value=null}return{events:n,loading:r,error:a,joiningEventId:s,fetchEvents:i,createEvent:f,deleteEvent:E,joinEvent:d,leaveEvent:y,clearError:p}});export{h as u};
