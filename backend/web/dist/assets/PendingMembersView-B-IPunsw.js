import{u as x}from"./members-Dnp6yhy1.js";import{_}from"./MainLayout.vue_vue_type_script_setup_true_lang-BGXrfI_D.js";import{_ as u}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CUL6qR6H.js";import{C as g}from"./ConfirmDialog-DtUN2KVr.js";import{d as h,r as v,C,y as c,A as w,o as r,b as e,a,e as p,g as s,z as j,t as d,F as U,m as $,E as A}from"./index-CZitzd5D.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"space-y-4"},B={key:0,class:"flex justify-center py-12"},z={key:1,class:"card bg-red-900/20 border border-red-500/30"},P={class:"text-red-400"},R={key:2,class:"card text-center py-8"},D={key:3,class:"space-y-2"},S={class:"text-sm text-gray-400"},T={class:"flex items-center gap-3"},I={class:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-400 font-bold text-lg"},L={class:"flex-1 min-w-0"},N={class:"font-semibold text-gray-100 truncate block"},V={class:"flex items-center gap-2 text-sm text-gray-400"},E={class:"flex items-center gap-2"},q=["onClick","disabled"],F={key:1,class:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K=["onClick","disabled"],O={key:1,class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},G={key:0,class:"fixed bottom-20 left-4 right-4 bg-red-500/90 text-white px-4 py-3 rounded-lg flex items-center justify-between z-50"},ee=h({__name:"PendingMembersView",setup(H){const t=x(),i=v(null),l=v(null);C(()=>{t.fetchPendingUsers()});function f(m){try{return new Date(m).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"})}catch{return"-"}}async function y(){i.value&&(await t.approveUser(i.value.id),i.value=null)}async function k(){l.value&&(await t.rejectUser(l.value.id),l.value=null)}return(m,n)=>(r(),c(_,null,{default:w(()=>[e("div",M,[n[8]||(n[8]=e("h2",{class:"text-xl font-bold text-gray-100"},"Membros Pendentes",-1)),s(t).loadingPending&&s(t).pendingUsers.length===0?(r(),a("div",B,[j(u)])):s(t).error&&s(t).pendingUsers.length===0?(r(),a("div",z,[e("p",P,d(s(t).error),1),e("button",{onClick:n[0]||(n[0]=o=>s(t).fetchPendingUsers()),class:"mt-4 btn btn-primary"}," Tentar novamente ")])):s(t).pendingUsers.length===0?(r(),a("div",R,[...n[4]||(n[4]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"text-gray-400"},"Nenhum membro pendente de aprovação",-1)])])):(r(),a("div",D,[e("p",S,d(s(t).pendingUsers.length)+" usuário(s) aguardando aprovação ",1),(r(!0),a(U,null,$(s(t).pendingUsers,o=>(r(),a("div",{key:o.id,class:"card"},[e("div",T,[e("div",I,d(o.nick.charAt(0).toUpperCase()),1),e("div",L,[e("span",N,d(o.nick),1),e("div",V,[e("span",null,d(s(A)[o.playerClass]),1),n[5]||(n[5]=e("span",null,"•",-1)),e("span",null,d(f(o.createdAt)),1)])]),e("div",E,[e("button",{onClick:b=>l.value=o,disabled:s(t).rejectingId===o.id,class:"p-2 rounded-lg hover:bg-red-500/20 transition-colors disabled:opacity-50",title:"Rejeitar"},[s(t).rejectingId===o.id?(r(),c(u,{key:0,size:"sm"})):(r(),a("svg",F,[...n[6]||(n[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],8,q),e("button",{onClick:b=>i.value=o,disabled:s(t).approvingId===o.id,class:"p-2 rounded-lg hover:bg-green-500/20 transition-colors disabled:opacity-50",title:"Aprovar"},[s(t).approvingId===o.id?(r(),c(u,{key:0,size:"sm"})):(r(),a("svg",O,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],8,K)])])]))),128))]))]),s(t).error&&s(t).pendingUsers.length>0?(r(),a("div",G,[e("span",null,d(s(t).error),1),e("button",{onClick:n[1]||(n[1]=o=>s(t).clearError()),class:"ml-4 font-bold"},"OK")])):p("",!0),i.value?(r(),c(g,{key:1,title:"Aprovar Membro",message:`Tem certeza que deseja aprovar ${i.value.nick}?`,"confirm-text":"Aprovar",onConfirm:y,onCancel:n[2]||(n[2]=o=>i.value=null)},null,8,["message"])):p("",!0),l.value?(r(),c(g,{key:2,title:"Rejeitar Solicitação",message:`Tem certeza que deseja rejeitar a solicitação de ${l.value.nick}?`,"confirm-text":"Rejeitar","confirm-variant":"danger",onConfirm:k,onCancel:n[3]||(n[3]=o=>l.value=null)},null,8,["message"])):p("",!0)]),_:1}))}});export{ee as default};
