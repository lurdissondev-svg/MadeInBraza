import{d as S,r as l,c as b,y as L,l as T,x as C,a as s,b as e,z as N,t as x,j as D,e as M,w as _,g as j,n as z,i as R,k as E,o}from"./index-j3L6_Cpj.js";const F={class:"min-h-screen bg-dark-900 flex flex-col justify-center px-4 py-8 sm:px-6 lg:px-8"},H={class:"w-full max-w-md mx-auto"},I={class:"card"},U={key:0,class:"text-center py-8"},$={key:1,class:"text-center space-y-4"},q={key:2,class:"text-center space-y-4"},Y={class:"text-gray-400"},G={class:"bg-dark-800 rounded-lg p-4 text-center"},J={class:"text-lg font-semibold text-primary-400"},K={class:"relative"},O=["type"],Q={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={class:"relative"},Z=["type"],ee={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:0,class:"mt-1 text-xs text-red-400"},oe={key:0,class:"text-red-400 text-sm text-center bg-red-500/10 rounded-lg p-3"},ae=["disabled"],le={key:0,class:"flex items-center justify-center gap-2"},ne={key:1},re={class:"mt-8 text-center text-gray-500 text-xs sm:text-sm"},de=S({__name:"ResetPasswordView",setup(ie){const k=E(),B=T(),d=l(""),w=l(""),r=l(""),i=l(""),c=l(!1),p=l(!1),v=l(!1),m=l(!0),a=l(null),g=l(!1),y=l(!1),f=b(()=>r.value===i.value),h=b(()=>r.value.length>=6&&f.value&&y.value);L(async()=>{if(d.value=B.query.token||"",!d.value){a.value="Token nao fornecido",m.value=!1;return}try{const n=await C.verifyResetToken({token:d.value});n.valid?(y.value=!0,w.value=n.nick):a.value="Token invalido ou expirado"}catch(n){a.value=n instanceof Error?n.message:"Token invalido ou expirado"}finally{m.value=!1}});async function P(){if(h.value){v.value=!0,a.value=null;try{await C.resetPassword({token:d.value,newPassword:r.value}),g.value=!0}catch(n){a.value=n instanceof Error?n.message:"Erro ao resetar senha"}finally{v.value=!1}}}function A(){k.push("/login")}function V(){k.push("/forgot-password")}return(n,t)=>(o(),s("div",F,[t[18]||(t[18]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl sm:text-4xl font-bold text-primary-500"}," Made in Braza "),e("p",{class:"mt-2 text-gray-400 text-sm sm:text-base"}," Criar nova senha ")],-1)),e("div",H,[e("div",I,[m.value?(o(),s("div",U,[...t[4]||(t[4]=[e("svg",{class:"animate-spin h-10 w-10 text-primary-500 mx-auto",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-4 text-gray-400"},"Verificando link...",-1)])])):g.value?(o(),s("div",$,[t[5]||(t[5]=N('<div class="w-16 h-16 mx-auto bg-green-500/20 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="text-xl font-semibold text-gray-100">Senha Alterada!</h2><p class="text-gray-400"> Sua senha foi alterada com sucesso. Agora voce pode fazer login. </p>',3)),e("button",{onClick:A,class:"btn-primary w-full py-3"}," Ir para Login ")])):!y.value&&a.value?(o(),s("div",q,[t[6]||(t[6]=e("div",{class:"w-16 h-16 mx-auto bg-red-500/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t[7]||(t[7]=e("h2",{class:"text-xl font-semibold text-gray-100"},"Link Invalido",-1)),e("p",Y,x(a.value),1),t[8]||(t[8]=e("p",{class:"text-sm text-gray-500"}," Solicite um novo link de recuperacao ",-1)),e("button",{onClick:V,class:"btn-primary w-full py-3"}," Solicitar Novo Link ")])):(o(),s("form",{key:3,onSubmit:D(P,["prevent"]),class:"space-y-5"},[e("div",G,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-400"},"Criando nova senha para",-1)),e("p",J,x(w.value),1)]),e("div",null,[t[12]||(t[12]=e("label",{for:"newPassword",class:"label"},"Nova Senha",-1)),e("div",K,[_(e("input",{id:"newPassword","onUpdate:modelValue":t[0]||(t[0]=u=>r.value=u),type:c.value?"text":"password",autocomplete:"new-password",placeholder:"Digite sua nova senha",class:z(["input pr-12",{"input-error":a.value}])},null,10,O),[[j,r.value]]),e("button",{type:"button",onClick:t[1]||(t[1]=u=>c.value=!c.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300 p-1"},[c.value?(o(),s("svg",Q,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(o(),s("svg",W,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),t[13]||(t[13]=e("p",{class:"mt-1 text-xs text-gray-500"},"Minimo 6 caracteres",-1))]),e("div",null,[t[16]||(t[16]=e("label",{for:"confirmPassword",class:"label"},"Confirmar Senha",-1)),e("div",X,[_(e("input",{id:"confirmPassword","onUpdate:modelValue":t[2]||(t[2]=u=>i.value=u),type:p.value?"text":"password",autocomplete:"new-password",placeholder:"Confirme sua nova senha",class:z(["input pr-12",{"input-error":i.value&&!f.value||a.value}])},null,10,Z),[[j,i.value]]),e("button",{type:"button",onClick:t[3]||(t[3]=u=>p.value=!p.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300 p-1"},[p.value?(o(),s("svg",ee,[...t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(o(),s("svg",te,[...t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),i.value&&!f.value?(o(),s("p",se," As senhas nao coincidem ")):M("",!0)]),a.value?(o(),s("div",oe,x(a.value),1)):M("",!0),e("button",{type:"submit",disabled:!h.value||v.value,class:"btn-primary w-full py-3 text-base font-semibold"},[v.value?(o(),s("span",le,[...t[17]||(t[17]=[e("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R(" Alterando... ",-1)])])):(o(),s("span",ne,"Alterar Senha"))],8,ae)],32))])]),e("div",re,[e("p",null,"Made in Braza Â© "+x(new Date().getFullYear()),1)])]))}});export{de as default};
