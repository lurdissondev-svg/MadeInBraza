import{d as g,r,c as y,a as s,b as e,t as c,j as k,e as b,w,v as h,n as _,i as C,k as V,o as a,x as B}from"./index-B9jUeESS.js";const S={class:"min-h-screen bg-dark-900 flex flex-col justify-center px-4 py-8 sm:px-6 lg:px-8"},j={class:"w-full max-w-md mx-auto"},z={class:"card"},M={key:0,class:"text-center space-y-4"},P={key:0,class:"bg-dark-800 rounded-lg p-4"},R={class:"text-lg font-mono text-primary-400 select-all"},F={key:1,class:"text-gray-400"},N={key:0,class:"text-red-400 text-sm text-center bg-red-500/10 rounded-lg p-3"},A=["disabled"],D={key:0,class:"flex items-center justify-center gap-2"},E={key:1},L={class:"mt-8 text-center text-gray-500 text-xs sm:text-sm"},q=g({__name:"ForgotPasswordView",setup(T){const m=V(),n=r(""),i=r(!1),o=r(null),d=r(!1),u=r(null),p=y(()=>n.value.trim().length>=3);async function f(){if(p.value){i.value=!0,o.value=null;try{const l=await B.forgotPassword({nick:n.value.trim()});d.value=!0,u.value=l.newPassword||null}catch(l){o.value=l instanceof Error?l.message:"Erro ao recuperar senha"}finally{i.value=!1}}}function x(){m.push("/login")}return(l,t)=>(a(),s("div",S,[t[8]||(t[8]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl sm:text-4xl font-bold text-primary-500"}," Made in Braza "),e("p",{class:"mt-2 text-gray-400 text-sm sm:text-base"}," Recupere sua senha ")],-1)),e("div",j,[e("div",z,[d.value?(a(),s("div",M,[t[3]||(t[3]=e("div",{class:"w-16 h-16 mx-auto bg-green-500/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t[4]||(t[4]=e("h2",{class:"text-xl font-semibold text-gray-100"},"Senha Redefinida!",-1)),u.value?(a(),s("div",P,[t[1]||(t[1]=e("p",{class:"text-sm text-gray-400 mb-2"},"Sua nova senha é:",-1)),e("p",R,c(u.value),1),t[2]||(t[2]=e("p",{class:"text-xs text-gray-500 mt-2"}," Anote esta senha e altere-a após fazer login ",-1))])):(a(),s("p",F," Sua senha foi redefinida. Verifique com um líder da guilda. ")),e("button",{onClick:x,class:"btn-primary w-full py-3"}," Ir para Login ")])):(a(),s("form",{key:1,onSubmit:k(f,["prevent"]),class:"space-y-6"},[e("div",null,[t[5]||(t[5]=e("label",{for:"nick",class:"label"},"Nick",-1)),w(e("input",{id:"nick","onUpdate:modelValue":t[0]||(t[0]=v=>n.value=v),type:"text",autocomplete:"username",placeholder:"Seu nick no jogo",class:_(["input",{"input-error":o.value}])},null,2),[[h,n.value]]),t[6]||(t[6]=e("p",{class:"mt-1 text-xs text-gray-500"}," Informe seu nick para recuperar a senha ",-1))]),o.value?(a(),s("div",N,c(o.value),1)):b("",!0),e("button",{type:"submit",disabled:!p.value||i.value,class:"btn-primary w-full py-3 text-base font-semibold"},[i.value?(a(),s("span",D,[...t[7]||(t[7]=[e("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Recuperando... ",-1)])])):(a(),s("span",E,"Recuperar Senha"))],8,A),e("div",{class:"text-center"},[e("button",{type:"button",onClick:x,class:"text-sm text-gray-400 hover:text-gray-300 transition-colors"}," ← Voltar para login ")])],32))])]),e("div",L,[e("p",null,"Made in Braza © "+c(new Date().getFullYear()),1)])]))}});export{q as default};
