import{d as z,c as u,R as I,a as n,o as s,n as h,b as t,t as c,e as v,f as o,G as L,j as M,A as b,r as B,E as P,C as D,B as U,F as A,q as R,k as T}from"./index-BCVEqFNE.js";import{u as E}from"./members-heJih1TZ.js";import{_ as V}from"./MainLayout.vue_vue_type_script_setup_true_lang-CIQawBsX.js";import{_ as $}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-DLfi4Sx-.js";import{C as j}from"./ConfirmDialog-BhnHTZZy.js";import"./braza_logo-Cfl0RS0W.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex items-center gap-3"},N=["src"],S={key:1},F={class:"flex-1 min-w-0"},G={class:"flex items-center gap-2"},H={key:0,class:"text-sm"},K={key:1,class:"text-xs text-gray-500"},O={class:"text-sm text-gray-400"},J={key:0,class:"flex items-center gap-1"},Q=["disabled"],W={key:1,class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X=["disabled"],Y={key:1,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Z=["disabled"],ee={key:1,class:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:1,class:"flex items-center"},se=z({__name:"MemberCard",props:{member:{},isLeader:{type:Boolean},currentUserId:{},promotingId:{},demotingId:{},banningId:{}},emits:["click","promote","demote","ban"],setup(g,{emit:C}){const e=g,d=C,a=u(()=>e.member.role===I.LEADER),m=u(()=>e.member.id===e.currentUserId),k=u(()=>e.isLeader&&!a.value&&!m.value),y=u(()=>e.isLeader&&a.value&&!m.value),x=u(()=>e.isLeader&&!a.value&&!m.value),_=u(()=>e.promotingId===e.member.id),f=u(()=>e.demotingId===e.member.id),r=u(()=>e.banningId===e.member.id),l=u(()=>{const p=e.member.avatarUrl;return p?`${p}`:null});return(p,i)=>(s(),n("div",{class:h(["card cursor-pointer transition-colors hover:bg-dark-600",a.value?"border-l-4 border-l-primary-500 bg-primary-500/5":""]),onClick:i[3]||(i[3]=w=>d("click"))},[t("div",q,[t("div",{class:h(["w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg overflow-hidden",l.value?"":a.value?"bg-primary-500":"bg-dark-500"])},[l.value?(s(),n("img",{key:0,src:l.value,alt:"Avatar",class:"w-full h-full object-cover"},null,8,N)):(s(),n("span",S,c(g.member.nick.charAt(0).toUpperCase()),1))],2),t("div",F,[t("div",G,[t("span",{class:h(["font-semibold truncate",a.value?"text-primary-400":"text-gray-100"])},c(g.member.nick),3),a.value?(s(),n("span",H,"ðŸ‘‘")):v("",!0),m.value?(s(),n("span",K,"(vocÃª)")):v("",!0)]),t("span",O,c(o(L)[g.member.playerClass]),1)]),k.value||y.value||x.value?(s(),n("div",J,[k.value?(s(),n("button",{key:0,onClick:i[0]||(i[0]=M(w=>d("promote"),["stop"])),disabled:_.value,class:"p-2 rounded-lg hover:bg-dark-500 transition-colors disabled:opacity-50",title:"Promover a lÃ­der"},[_.value?(s(),b($,{key:0,size:"sm"})):(s(),n("svg",W,[...i[4]||(i[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])]))],8,Q)):v("",!0),y.value?(s(),n("button",{key:1,onClick:i[1]||(i[1]=M(w=>d("demote"),["stop"])),disabled:f.value,class:"p-2 rounded-lg hover:bg-dark-500 transition-colors disabled:opacity-50",title:"Rebaixar para membro"},[f.value?(s(),b($,{key:0,size:"sm"})):(s(),n("svg",Y,[...i[5]||(i[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"},null,-1)])]))],8,X)):v("",!0),x.value?(s(),n("button",{key:2,onClick:i[2]||(i[2]=M(w=>d("ban"),["stop"])),disabled:r.value,class:"p-2 rounded-lg hover:bg-dark-500 transition-colors disabled:opacity-50",title:"Banir membro"},[r.value?(s(),b($,{key:0,size:"sm"})):(s(),n("svg",ee,[...i[6]||(i[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])]))],8,Z)):v("",!0)])):(s(),n("div",te,[t("span",{class:h(["px-2 py-1 text-xs rounded-full",a.value?"bg-primary-500/20 text-primary-400":"bg-dark-500 text-gray-400"])},c(a.value?"LÃ­der":"Membro"),3)]))])],2))}}),re={class:"space-y-4"},oe={class:"flex items-center justify-between"},ne={class:"text-sm text-gray-400"},ae={class:"flex gap-4 text-sm"},le={class:"flex items-center gap-2"},ie={class:"text-primary-400"},de={class:"flex items-center gap-2"},me={class:"text-gray-300"},ue={key:0,class:"flex justify-center py-12"},ce={key:1,class:"card bg-red-900/20 border border-red-500/30"},ve={class:"text-red-400"},be={key:2,class:"card text-center py-8"},pe={key:3,class:"space-y-2"},ge={key:0,class:"fixed bottom-20 left-4 right-4 bg-red-500/90 text-white px-4 py-3 rounded-lg flex items-center justify-between z-50"},Ce=z({__name:"MembersView",setup(g){const C=T(),e=E(),d=B(null),a=B(null),m=B(null);P(()=>{e.fetchMembers()});function k(f){C.push(`/members/${f.id}`)}async function y(){d.value&&(await e.promoteMember(d.value.id),d.value=null)}async function x(){a.value&&(await e.demoteMember(a.value.id),a.value=null)}async function _(){m.value&&(await e.banMember(m.value.id),m.value=null)}return(f,r)=>(s(),b(V,null,{default:D(()=>[t("div",re,[t("div",oe,[r[5]||(r[5]=t("h2",{class:"text-xl font-bold text-gray-100"},"Membros da Guilda",-1)),t("div",ne,c(o(e).members.length)+" membros ",1)]),t("div",ae,[t("div",le,[t("span",ie,"ðŸ‘‘ "+c(o(e).leaderCount),1),r[6]||(r[6]=t("span",{class:"text-gray-500"},"lÃ­deres",-1))]),t("div",de,[t("span",me,c(o(e).memberCount),1),r[7]||(r[7]=t("span",{class:"text-gray-500"},"membros",-1))])]),o(e).loading&&o(e).members.length===0?(s(),n("div",ue,[U($)])):o(e).error&&o(e).members.length===0?(s(),n("div",ce,[t("p",ve,c(o(e).error),1),t("button",{onClick:r[0]||(r[0]=l=>o(e).fetchMembers()),class:"mt-4 btn btn-primary"}," Tentar novamente ")])):o(e).members.length===0?(s(),n("div",be,[...r[8]||(r[8]=[t("svg",{class:"w-16 h-16 mx-auto text-gray-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),t("p",{class:"text-gray-400"},"Nenhum membro encontrado",-1)])])):(s(),n("div",pe,[(s(!0),n(A,null,R(o(e).sortedMembers,l=>(s(),b(se,{key:l.id,member:l,"is-leader":o(e).isLeader,"current-user-id":o(e).currentUserId,"promoting-id":o(e).promotingId,"demoting-id":o(e).demotingId,"banning-id":o(e).banningId,onClick:p=>k(l),onPromote:p=>d.value=l,onDemote:p=>a.value=l,onBan:p=>m.value=l},null,8,["member","is-leader","current-user-id","promoting-id","demoting-id","banning-id","onClick","onPromote","onDemote","onBan"]))),128))]))]),o(e).error&&o(e).members.length>0?(s(),n("div",ge,[t("span",null,c(o(e).error),1),t("button",{onClick:r[1]||(r[1]=l=>o(e).clearError()),class:"ml-4 font-bold"},"OK")])):v("",!0),d.value?(s(),b(j,{key:1,title:"Promover a LÃ­der",message:`Tem certeza que deseja promover ${d.value.nick} a lÃ­der?`,"confirm-text":"Promover",onConfirm:y,onCancel:r[2]||(r[2]=l=>d.value=null)},null,8,["message"])):v("",!0),a.value?(s(),b(j,{key:2,title:"Rebaixar para Membro",message:`Tem certeza que deseja rebaixar ${a.value.nick} para membro?`,"confirm-text":"Rebaixar",onConfirm:x,onCancel:r[3]||(r[3]=l=>a.value=null)},null,8,["message"])):v("",!0),m.value?(s(),b(j,{key:3,title:"Banir Membro",message:`Tem certeza que deseja banir ${m.value.nick}? Esta aÃ§Ã£o pode ser revertida.`,"confirm-text":"Banir","confirm-variant":"danger",onConfirm:_,onCancel:r[4]||(r[4]=l=>m.value=null)},null,8,["message"])):v("",!0)]),_:1}))}});export{Ce as default};
