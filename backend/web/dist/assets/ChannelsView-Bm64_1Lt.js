import{d as g,L as i,a as l,o,n as C,b as e,e as k,f as s,t as h,j as M,r as p,E,A as v,C as $,B as L,i as V,F as z,q as B,k as S}from"./index-BCVEqFNE.js";import{u as N,M as j}from"./MembersSheet-DkRHG9mB.js";import{_ as A}from"./MainLayout.vue_vue_type_script_setup_true_lang-CIQawBsX.js";import{_ as x}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-DLfi4Sx-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./braza_logo-Cfl0RS0W.js";const R={class:"flex items-center gap-4"},T={class:"relative"},H={class:"w-10 h-10 rounded-full bg-primary-500/20 flex items-center justify-center"},D={key:0,class:"w-5 h-5 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_={key:1,class:"w-5 h-5 text-primary-400",fill:"currentColor",viewBox:"0 0 24 24"},G={key:2,class:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},P={key:3,class:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},F={key:0,class:"absolute -top-1 -right-1 min-w-5 h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-bold flex items-center justify-center"},Y={class:"flex-1 min-w-0"},q={class:"text-sm text-gray-400"},I={key:0,class:"text-xs text-gray-500"},J=g({__name:"ChannelCard",props:{channel:{},unreadCount:{}},emits:["click","showMembers"],setup(r,{emit:b}){const t=b,c={[i.GENERAL]:"Geral",[i.LEADERS]:"Lideres",[i.EVENT]:"Evento",[i.PARTY]:"Party"},u={[i.GENERAL]:"bg-dark-600",[i.LEADERS]:"bg-primary-500/20 border-primary-500/30",[i.EVENT]:"bg-blue-500/20 border-blue-500/30",[i.PARTY]:"bg-purple-500/20 border-purple-500/30"};return(f,n)=>(o(),l("div",{onClick:n[1]||(n[1]=y=>t("click")),class:C(["card cursor-pointer transition-all hover:scale-[1.02] border",u[r.channel.type]])},[e("div",R,[e("div",T,[e("div",H,[r.channel.type===s(i).GENERAL?(o(),l("svg",D,[...n[2]||(n[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])])):r.channel.type===s(i).LEADERS?(o(),l("svg",_,[...n[3]||(n[3]=[e("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"},null,-1)])])):r.channel.type===s(i).EVENT?(o(),l("svg",G,[...n[4]||(n[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])])):(o(),l("svg",P,[...n[5]||(n[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])]))]),r.unreadCount&&r.unreadCount>0?(o(),l("div",F,h(r.unreadCount>99?"99+":r.unreadCount),1)):k("",!0)]),e("div",Y,[e("h4",{class:C(["font-semibold truncate",r.unreadCount&&r.unreadCount>0?"text-primary-400 font-bold":"text-gray-100"])},h(r.channel.name),3),e("p",q,h(c[r.channel.type]),1),r.channel._count?.messages?(o(),l("p",I,h(r.channel._count.messages)+" mensagens ",1)):k("",!0)]),e("button",{onClick:n[0]||(n[0]=M(y=>t("showMembers"),["stop"])),class:"p-2 hover:bg-dark-500 rounded-lg transition-colors"},[...n[6]||(n[6]=[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)])]),n[7]||(n[7]=e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],2))}}),K={class:"space-y-4"},O={key:0,class:"flex justify-center py-12"},Q={key:1,class:"card bg-red-900/20 border border-red-500/30"},U={class:"text-red-400"},W={key:2,class:"card text-center py-8"},X=["disabled"],Z={key:3,class:"space-y-3"},ae=g({__name:"ChannelsView",setup(r){const b=S(),t=N(),c=p(!1),u=p(null);E(()=>{t.fetchChannels()});function f(m){b.push(`/channels/${m.id}`)}function n(m){u.value=m,t.openChannel(m).then(()=>{t.fetchMembers(),c.value=!0})}function y(){c.value=!1,u.value=null}return(m,a)=>(o(),v(A,null,{default:$(()=>[e("div",K,[a[5]||(a[5]=e("h2",{class:"text-xl font-bold text-gray-100"},"Canais",-1)),s(t).loading&&(!s(t).channels||s(t).channels.length===0)?(o(),l("div",O,[L(x)])):s(t).error?(o(),l("div",Q,[e("p",U,h(s(t).error),1),e("button",{onClick:a[0]||(a[0]=d=>s(t).fetchChannels()),class:"mt-4 btn btn-primary"}," Tentar novamente ")])):!s(t).channels||s(t).channels.length===0?(o(),l("div",W,[a[3]||(a[3]=e("svg",{class:"w-16 h-16 mx-auto text-gray-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})],-1)),a[4]||(a[4]=e("p",{class:"text-gray-400 mb-4"},"Nenhum canal disponivel",-1)),e("button",{onClick:a[1]||(a[1]=d=>s(t).setupDefaultChannels()),disabled:s(t).loading,class:"btn btn-primary"},[s(t).loading?(o(),v(x,{key:0,size:"sm",class:"mr-2"})):k("",!0),a[2]||(a[2]=V(" Criar Canais Padrao ",-1))],8,X)])):(o(),l("div",Z,[(o(!0),l(z,null,B(s(t).sortedChannels,d=>(o(),v(J,{key:d.id,channel:d,"unread-count":s(t).unreadCounts[d.id],onClick:w=>f(d),onShowMembers:w=>n(d)},null,8,["channel","unread-count","onClick","onShowMembers"]))),128))]))]),c.value&&u.value?(o(),v(j,{key:0,"channel-name":u.value.name,members:s(t).members,loading:s(t).loadingMembers,onClose:y},null,8,["channel-name","members","loading"])):k("",!0)]),_:1}))}});export{ae as default};
